{% extends 'base.html' %}

{% block content %}
  <h1>All Blog Posts</h1>
  {% for post in posts %}
    <div>
      <h2><a href="{% url 'post_detail' post.pk %}">{{ post.title }}</a></h2>
      <p>{{ post.content }}</p>
      <p>Author: {{ post.author.username }}</p>
      <p>Created at: {{ post.created_at }}</p>
      <p>Updated at: {{ post.updated_at }}</p>
      
      <!-- Display Likes and Comments Counts -->
      <p>Likes: {{ post.likes }}</p>
      <p>Comments: {{ post.comments }}</p>

      <!-- Add a link to view comments for the post -->
      <form method="post" action="{% url 'set_like' post.pk %}">
        {% csrf_token %}
        <button type="submit">
          {% if post.is_liked %}
            Unlike
          {% else %}
            Like
          {% endif %}
        </button>
      </form>
      <a href="{% url 'post_comments' post.pk %}">View Comments</a>
    </div>
  {% endfor %}
  
  <a href="{% url 'post_create' %}">Create New Post</a>
{% endblock %}